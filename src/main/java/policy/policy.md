#设计模式14 策略模式 Strategy Pattern

行为型模式
#### 定义
Define a family of algorithms, encapsulate each one , and make them interchangeable.
定义一组算法，将每个算法都封装起来，并且使他们之间可以相互替换。此模式让算法的变化独立于使用算法的客户。

#### 结构

类图
(img)

- Context 封装角色
	也叫上下文角色，起承上启下的作用，屏蔽高层模块对策略，算法的直接访问。封装可能存在的变化。
- Strategy 抽象模式策略角色
	策略，算法家族的抽象，通常为接口，定义每个策略或算法必须具有的方法和属性。
- ConcreteStrategy 具体策略模式
	实现具体的算法。



#### 策略模式的优点
1. 算法可以自由切换
	这是策略模式本身定义的，只要实现抽闲策略，它就成为策略家族的一个成员，通过封装角色对其进行封装，保证对外提供“可自由切换”的策略。
2. 避免使用多重条件判断
3. 扩展性良好
	非常容易就能扩展系统中的算法类。

#### 策略模式的缺点
1. 策略类数量过多
	每一个算法就是一个类，复用的可能性很小，类数量增多。
2. 素有的策略类都向外暴露。
	上层模块必须知道有哪些算法，然后才决定使用哪一种策略，这与迪米特法则是相违背的。我只使用了一个策略，凭什么需要了解这个策略。这是策略模式的一个确定，但是可以使用它们模式来修正这个缺陷，比如工厂方法模式，代理模式或则享元模式。

#### 使用场景
- 多个类只有在算法或者行为上稍有不同的场景。
- 算法需要自由的切换的场景
	例如，算法的选择由使用者决定，或者算法始终在进化，特别是一些站在技术前沿的行业，连业务专家都无法保证这样的算法能保持多长时间，在这种情况下策略模式是最好的助手。
- 需要屏蔽算法规则的场景



#### 注意事项
如果系统中的策略家族的具体数量超过4个，则需要考虑使用混合模式，解决策略类膨胀的和对外暴露的问题。否则日后系统维护会成为一个大问题。
